<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
</head>

<body>

    <div data-role="page" data-position="fixed" id='page'>
        <div data-role="header">
            <h1>Summary of Defusion Strategies</h1>
        </div>
        <!-- /header -->

        <div data-role="content" id='section_5_body'>
            <p>
                <b><i>I am having the thought that:</i></b> For example, <i>I am having the thought that I'm making a fool of myself.</i>
                <br>
                <br>
                <b><i>Name what the mind is doing:</i></b> Name the type of anxious thinking (fortune-telling, mind reading, "shoulding," postmortem, spotlight effect, storytelling, and more basic types, such as worrying and judging).
                <br>
                <br>
                <b><i>Give real names to your thoughts:</i></b> For example, <i>Mind-Reading Randy.</i>
                <br>
                <br>
                <b><i>Ditch the meanings of your thoughts:</i></b> Use repetition or other voices, sing them, see them.
                <br>
                <br>
                <b><i>Thank the mind:</i></b> For example, <i>Thanks for the memory.</i>
                <br>
                <br>
                <i><b>Defuse with Dr. Phil:</b> How's that thought working for you?</i>
                <br>
                <br>
                <b><i>Awareness of thinking:</i></b> Listen to the audio download (at www.newharbinger.com/20801) or sit silently with your thoughts.
                <br>
                <br>
                <b><i>Observe your thoughts:</i></b> Use the waterfall metaphor, leaves on a stream, or clouds in the sky.
            </p>
            <h2> Exercise 6: Defusing from Your Anxious Thoughts </h2>
            <p>
                Over the next several days, try out all of the defusion strategies (summarized in the previous box).
                <br>
                <br>
                To get as much practice as possible, try defusing from everyday thoughts (for example, <i>I am having the thought that I want to eat a muffin for breakfast)</i> as well as social-anxiety thoughts. 
                <br>
                <br>
                You can try some of the strategies right when you notice the thought (e.g, <b>naming what the mind is doing</b> or <b>thanking the mind</b>); for others, you may want to wait until you have some time to yourself (e.g., <b>ditching the meaning of your thoughts</b> or <b>awareness of thinking</b>). 
            </p>

            <form name="exercise_6" id='exercise_6'>
                <table border="0" cellpadding='0' id='table_exercise_6'>
                    <tr>
                        <td>
                            <center><b>Thought</b></center>
                        </td>
                        <td>
                            <center><b>Defusion Strategy</b></center>
                        </td>
                        <td>
                            <center><b>What Did You Notice?</b></center>
                        </td>
                        <td>
                        </td>
                    </tr>
                    <tr id='exercise_6_row_1'>
                        <td>
                            <input type='text' class='exercise_6_thought' onchange='submitExcerise_6()'/>
                        </td>
                        <td>
                            <div data-role="fieldcontain">
                                <select id='exercise_6_strategy_1' class="exercise_6_strategy" data-native-menu="false" data-mini='true' onchange='submitExcerise_6()'>
                                    <option value="none"></option>
                                    <option value="Fortune-Telling">Fortune-Telling</option>
                                    <option value="Mind Reading">Mind Reading</option>
                                    <option value="Shoulding">"Shoulding"</option>
                                    <option value="Postmortem">Postmortem</option>
                                    <option value="The Spotlight Effect">The Spotlight Effect</option>
                                    <option value="Generating Stories">Generating Stories</option>
                                </select>
                            </div>
                        </td>
                        <td>
                            <input type='text' class='exercise_6_notice' onchange='submitExcerise_6()'/>
                        </td>
                        <td >
                        </td>
                    </tr>
                </table>
            </form>
            <a href="#" id='2' onclick='exercise_6_add_row();' data-role="button" >Add Entry</a>
            <script>
                if (localStorage['exercise_6']) {
                    var exercise_6 = JSON.parse(localStorage['exercise_6']);
                    for (var i = 1; i<=exercise_6['rows']; i++){
                        if (i===1) {
                            var thoughts = document.getElementsByClassName('exercise_6_thought');
                            var notices = document.getElementsByClassName('exercise_6_notice');

                            thoughts[i-1].value = exercise_6['exercise_6_thought_'+i];
                            notices[i-1].value = exercise_6['exercise_6_notice_'+i];
                        } else {
                            exercise_6_add_row(exercise_6['exercise_6_thought_'+i],exercise_6['exercise_6_notice_'+i]);
                        }
                        $("#exercise_6_strategy_"+i).val(exercise_6['exercise_6_strategy_'+i]).attr('selected', true)
                        console.log(exercise_6['exercise_6_strategy_'+i])
                    }
                }
                function submitExcerise_6() {
                    var exercise_6 = {};
                    var table=document.getElementById("table_exercise_6");

                    exercise_6['rows'] = table.rows.length-1; //exclude header

                    var strategies = document.getElementsByClassName('exercise_6_strategy');
                    var thoughts = document.getElementsByClassName('exercise_6_thought');
                    var notices = document.getElementsByClassName('exercise_6_notice');
                    for (var i = 1; i<table.rows.length;i++){

                        exercise_6['exercise_6_thought_'+i] = thoughts[i-1].value
                        var id = strategies[i].id;
                        exercise_6['exercise_6_strategy_'+i] = $("#"+id).val();
                        exercise_6['exercise_6_notice_'+i] =  notices[i-1].value

                        console.log(thoughts[i-1].value)
                        console.log($("#"+id).val())
                        console.log (notices[i-1].value)

                    }
                    localStorage.setItem('exercise_6', JSON.stringify(exercise_6));             
                }

                function exercise_6_remove_row(id) {
                    var table=document.getElementById("table_exercise_6");
                    var rowIndex = document.getElementById("exercise_6_row_"+id).rowIndex;
                    table.deleteRow(rowIndex);
                }
                function exercise_6_add_row(thought, notice) {
                    if (!thought) {
                        thought = ""
                    }
                    if (!notice) {
                        notice = ""
                    }
                    var table=document.getElementById("table_exercise_6");
                    var row_number = table.rows.length;

                    var row=table.insertRow(-1);
                    row.id = "exercise_6_row_"+row_number;
                    var cell1=row.insertCell(0);
                    var cell2=row.insertCell(1);
                    var cell3=row.insertCell(2);
                    var cell4=row.insertCell(3);

                    cell1.innerHTML="<input type='text' id='exercise_6_thought_"+row_number+"' value='"+thought+"'/>";


                    cell2.innerHTML="<div data-role='fieldcontain'><select data-mini='true' id='exercise_6_strategy_"+row_number+"' class='exercise_6_strategy' data-native-menu='false'><option value='none'></option><option value='Fortune-Telling'>Fortune-Telling</option><option value='Mind Reading'>Mind Reading</option><option value='Shoulding'>'Shoulding'</option><option value='Postmortem'>Postmortem</option><option value='The Spotlight Effect'>The Spotlight Effect</option><option value='Generating Stories'>Generating Stories</option></select></div>";

                    cell3.innerHTML = "<input type='text' name='exercise_6_notice_1' value='"+notice+"' />";
                    cell4.innerHTML = "<a href='#' id='exercise_6_remove_"+row_number+"' onclick='exercise_6_remove_row("+row_number+");' data-role='button' data-icon='delete' data-iconpos='notext' data-mini='true' data-inline='true'>Delete</a>";
                    $('#page').trigger("pagecreate");
                }
            </script>
        </div>
        <!-- /content -->


        <div data-role="footer" data-position="fixed">
            <div data-role="navbar" data-iconpos="right">
                <ul>
                    <li>
                        <a href="../index.html" data-rel="dialog" data-transition="pop">Back</a>
                    </li>
                    <li>
                        <a href="../index.html">Home</a>
                    </li>
                    <li>
                        <a href="section_6.html"onclick="">Continue</a>
                    </li>
                </ul>
            </div>
            <!-- /navbar -->
        </div>
        <!-- /footer -->

    </div>
    <!-- /page -->

</body>
</html>
